{"version":3,"sources":["../../src/actions/JoinGroupActions.js"],"names":["joinSuccess","peer","GROUP_JOIN_VIA_LINK_SUCCESS","setTimeout","replace","key","joinFailed","error","GROUP_JOIN_VIA_LINK_ERROR","joinAfterLogin","getState","token","push","joinGroupViaLink","GROUP_JOIN_VIA_LINK","joinGroupViaToken","then"],"mappings":";;;;AAIA;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AACzB,oCAAS,+BAAYC,2BAArB;AACAC,aAAW;AAAA,WAAM,kBAAQC,OAAR,UAAuBH,KAAKI,GAA5B,CAAN;AAAA,GAAX,EAAqD,IAArD;AACD,C,CAbD;;;;AAeA,SAASC,UAAT,CAAoBC,KAApB,EAA2B;AACzB,oCAAS,+BAAYC,yBAArB,EAAgD,EAAED,YAAF,EAAhD;AACD;;kBAEc;AACbE,gBADa,4BACI;AAAA,gCACG,yBAAeC,QAAf,EADH;AAAA,QACPC,KADO,yBACPA,KADO;;AAEf,QAAIA,KAAJ,EAAW;AACT,wBAAQC,IAAR,YAAsBD,KAAtB;AACD;AACF,GANY;AAObE,kBAPa,4BAOIF,KAPJ,EAOW;AACtB,sCAAS,+BAAYG,mBAArB,EAA0C,EAAEH,YAAF,EAA1C;AACA,0BAAYI,iBAAZ,CAA8BJ,KAA9B,EAAqCK,IAArC,CAA0ChB,WAA1C,EAAuDM,UAAvD;AACD;AAVY,C","file":"JoinGroupActions.js","sourcesContent":["/*\r\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport { dispatch } from '../dispatcher/ActorAppDispatcher';\r\nimport { ActionTypes } from '../constants/ActorAppConstants';\r\nimport ActorClient from '../utils/ActorClient';\r\nimport history from '../utils/history';\r\nimport JoinGroupStore from '../stores/JoinGroupStore';\r\n\r\nfunction joinSuccess(peer) {\r\n  dispatch(ActionTypes.GROUP_JOIN_VIA_LINK_SUCCESS);\r\n  setTimeout(() => history.replace(`/im/${peer.key}`), 1000);\r\n}\r\n\r\nfunction joinFailed(error) {\r\n  dispatch(ActionTypes.GROUP_JOIN_VIA_LINK_ERROR, { error });\r\n}\r\n\r\nexport default {\r\n  joinAfterLogin() {\r\n    const { token } = JoinGroupStore.getState();\r\n    if (token) {\r\n      history.push(`/join/${token}`);\r\n    }\r\n  },\r\n  joinGroupViaLink(token) {\r\n    dispatch(ActionTypes.GROUP_JOIN_VIA_LINK, { token });\r\n    ActorClient.joinGroupViaToken(token).then(joinSuccess, joinFailed);\r\n  }\r\n};\r\n"]}