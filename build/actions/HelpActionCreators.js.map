{"version":3,"sources":["../../src/actions/HelpActionCreators.js"],"names":["handleFind","users","lenght","Error","helpUser","uid","id","isContact","addContact","open","SharedActor","get","phone","helpPhone","findUsers","then","selectDialogPeerUser","catch","error"],"mappings":";;;;AAIA;;;;AACA;;AACA;;;;AACA;;;;;;AAPA;;;;kBASe;AACbA,YADa,sBACFC,KADE,EACK;AAChB,QAAIA,MAAMC,MAAN,KAAiB,CAArB,EAAwB;AACtB,YAAM,IAAIC,KAAJ,CAAU,wBAAV,CAAN;AACD;;AAED,QAAMC,WAAWH,MAAM,CAAN,CAAjB;AACA,QAAMI,MAAMD,SAASE,EAArB;;AAEA,QAAI,CAACF,SAASG,SAAd,EAAyB;AACvB,4BAAYC,UAAZ,CAAuBH,GAAvB;AACD;;AAED,WAAOA,GAAP;AACD,GAdY;AAgBbI,MAhBa,kBAgBN;AACL,QAAMC,cAAc,0BAAgBC,GAAhB,EAApB;AACA,QAAMC,QAAQF,YAAYG,SAAZ,GAAwBH,YAAYG,SAApC,+BAAd;;AAEA,0BAAYC,SAAZ,CAAsBF,KAAtB,EACGG,IADH,CACQ,KAAKf,UADb,EAEGe,IAFH,CAEQ,+BAAqBC,oBAF7B,EAGGC,KAHH,CAGS,iBAAS;AAAC,YAAM,IAAId,KAAJ,CAAUe,KAAV,CAAN;AAAuB,KAH1C;AAID;AAxBY,C","file":"HelpActionCreators.js","sourcesContent":["/*\r\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport ActorClient from '../utils/ActorClient';\r\nimport { helpPhone } from '../constants/ActorAppConstants';\r\nimport SharedContainer from '../utils/SharedContainer';\r\nimport DialogActionCreators from './DialogActionCreators';\r\n\r\nexport default {\r\n  handleFind(users) {\r\n    if (users.lenght === 0) {\r\n      throw new Error('Support user not found');\r\n    }\r\n\r\n    const helpUser = users[0];\r\n    const uid = helpUser.id;\r\n\r\n    if (!helpUser.isContact) {\r\n      ActorClient.addContact(uid)\r\n    }\r\n\r\n    return uid;\r\n  },\r\n\r\n  open() {\r\n    const SharedActor = SharedContainer.get();\r\n    const phone = SharedActor.helpPhone ? SharedActor.helpPhone : helpPhone;\r\n\r\n    ActorClient.findUsers(phone)\r\n      .then(this.handleFind)\r\n      .then(DialogActionCreators.selectDialogPeerUser)\r\n      .catch(error => {throw new Error(error)});\r\n  }\r\n};\r\n"]}