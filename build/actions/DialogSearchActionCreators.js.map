{"version":3,"sources":["../../src/actions/DialogSearchActionCreators.js"],"names":["DialogSearchActionCreators","findAllText","trailing","findAllDocs","findAllLinks","findAllPhotos","open","query","DIALOG_SEARCH_SHOW","toggleAutoFocus","changeSearchQuery","close","DIALOG_SEARCH_HIDE","filter","DIALOG_SEARCH_CHANGE_QUERY","text","docs","links","photos","peer","getCurrentPeer","request","DIALOG_SEARCH_TEXT","success","DIALOG_SEARCH_TEXT_SUCCESS","failure","DIALOG_SEARCH_TEXT_ERROR","DIALOG_SEARCH_DOCS","DIALOG_SEARCH_DOCS_SUCCESS","DIALOG_SEARCH_DOCS_ERROR","DIALOG_SEARCH_LINKS","DIALOG_SEARCH_LINKS_SUCCESS","DIALOG_SEARCH_LINKS_ERROR","DIALOG_SEARCH_PHOTO","DIALOG_SEARCH_PHOTO_SUCCESS","DIALOG_SEARCH_PHOTO_ERROR"],"mappings":";;;;AAGA;;AACA;;AACA;;AACA;;;;AAEA;;;;AAEA;;;;;;0JAVA;;;;;IAYMA,0B;AACJ,wCAAc;AAAA;;AACZ,SAAKC,WAAL,GAAmB,sBAAS,KAAKA,WAAd,EAA2B,GAA3B,EAAgC,EAAEC,UAAU,IAAZ,EAAhC,CAAnB;AACA,SAAKC,WAAL,GAAmB,sBAAS,KAAKA,WAAd,EAA2B,GAA3B,EAAgC,EAAED,UAAU,IAAZ,EAAhC,CAAnB;AACA,SAAKE,YAAL,GAAoB,sBAAS,KAAKA,YAAd,EAA4B,GAA5B,EAAiC,EAAEF,UAAU,IAAZ,EAAjC,CAApB;AACA,SAAKG,aAAL,GAAqB,sBAAS,KAAKA,aAAd,EAA6B,GAA7B,EAAkC,EAAEH,UAAU,IAAZ,EAAlC,CAArB;AACD;;uCAEDI,I,mBAAiB;AAAA,QAAZC,KAAY,uEAAJ,EAAI;;AACf,sCAAS,+BAAYC,kBAArB;AACA,oCAAsBC,eAAtB,CAAsC,KAAtC;;AAEA,SAAKC,iBAAL,CAAuBH,KAAvB;AACD,G;;uCAEDI,K,oBAAQ;AACN,sCAAS,+BAAYC,kBAArB;AACA,oCAAsBH,eAAtB,CAAsC,IAAtC;AACD,G;;uCAEDC,iB,8BAAkBH,K,EAAoB;AAAA,QAAbM,MAAa,uEAAJ,EAAI;;AACpC,sCAAS,+BAAYC,0BAArB,EAAiD,EAAEP,YAAF,EAAjD;;AAEA,QAAIM,OAAOE,IAAX,EAAiB,KAAKd,WAAL,CAAiBM,KAAjB;AACjB,QAAIM,OAAOG,IAAX,EAAiB,KAAKb,WAAL;AACjB,QAAIU,OAAOI,KAAX,EAAkB,KAAKb,YAAL;AAClB,QAAIS,OAAOK,MAAX,EAAmB,KAAKb,aAAL;AACpB,G;;uCAEDJ,W,wBAAYM,K,EAAO;AACjB,QAAMY,OAAO,sBAAYC,cAAZ,EAAb;AACA,2CAAc,sBAAYnB,WAAZ,CAAwBkB,IAAxB,EAA8BZ,KAA9B,CAAd,EAAoD;AAClDc,eAAS,+BAAYC,kBAD6B;AAElDC,eAAS,+BAAYC,0BAF6B;AAGlDC,eAAS,+BAAYC;AAH6B,KAApD,EAIG,EAAEP,UAAF,EAAQZ,YAAR,EAJH;AAKD,G;;uCAEDJ,W,0BAAc;AACZ,QAAMgB,OAAO,sBAAYC,cAAZ,EAAb;AACA,2CAAc,sBAAYjB,WAAZ,CAAwBgB,IAAxB,CAAd,EAA6C;AAC3CE,eAAS,+BAAYM,kBADsB;AAE3CJ,eAAS,+BAAYK,0BAFsB;AAG3CH,eAAS,+BAAYI;AAHsB,KAA7C,EAIG,EAAEV,UAAF,EAJH;AAKD,G;;uCAEDf,Y,2BAAe;AACb,QAAMe,OAAO,sBAAYC,cAAZ,EAAb;AACA,2CAAc,sBAAYhB,YAAZ,CAAyBe,IAAzB,CAAd,EAA8C;AAC5CE,eAAS,+BAAYS,mBADuB;AAE5CP,eAAS,+BAAYQ,2BAFuB;AAG5CN,eAAS,+BAAYO;AAHuB,KAA9C,EAIG,EAAEb,UAAF,EAJH;AAKD,G;;uCAEDd,a,4BAAgB;AACd,QAAMc,OAAO,sBAAYC,cAAZ,EAAb;AACA,2CAAc,sBAAYf,aAAZ,CAA0Bc,IAA1B,CAAd,EAA+C;AAC7CE,eAAS,+BAAYY,mBADwB;AAE7CV,eAAS,+BAAYW,2BAFwB;AAG7CT,eAAS,+BAAYU;AAHwB,KAA/C,EAIG,EAAEhB,UAAF,EAJH;AAKD,G;;;;;kBAGY,IAAInB,0BAAJ,E","file":"DialogSearchActionCreators.js","sourcesContent":["/*\r\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\r\n */\r\nimport { debounce } from 'lodash';\r\nimport { dispatch, dispatchAsync } from '../dispatcher/ActorAppDispatcher';\r\nimport { ActionTypes } from '../constants/ActorAppConstants';\r\nimport ActorClient from '../utils/ActorClient';\r\n\r\nimport ComposeActionCreators from './ComposeActionCreators';\r\n\r\nimport DialogStore from '../stores/DialogStore';\r\n\r\nclass DialogSearchActionCreators {\r\n  constructor() {\r\n    this.findAllText = debounce(this.findAllText, 300, { trailing: true });\r\n    this.findAllDocs = debounce(this.findAllDocs, 300, { trailing: true });\r\n    this.findAllLinks = debounce(this.findAllLinks, 300, { trailing: true });\r\n    this.findAllPhotos = debounce(this.findAllPhotos, 300, { trailing: true });\r\n  }\r\n\r\n  open(query = '') {\r\n    dispatch(ActionTypes.DIALOG_SEARCH_SHOW);\r\n    ComposeActionCreators.toggleAutoFocus(false);\r\n\r\n    this.changeSearchQuery(query)\r\n  }\r\n\r\n  close() {\r\n    dispatch(ActionTypes.DIALOG_SEARCH_HIDE);\r\n    ComposeActionCreators.toggleAutoFocus(true);\r\n  }\r\n\r\n  changeSearchQuery(query, filter = {}) {\r\n    dispatch(ActionTypes.DIALOG_SEARCH_CHANGE_QUERY, { query });\r\n\r\n    if (filter.text) this.findAllText(query);\r\n    if (filter.docs) this.findAllDocs();\r\n    if (filter.links) this.findAllLinks();\r\n    if (filter.photos) this.findAllPhotos();\r\n  }\r\n\r\n  findAllText(query) {\r\n    const peer = DialogStore.getCurrentPeer();\r\n    dispatchAsync(ActorClient.findAllText(peer, query), {\r\n      request: ActionTypes.DIALOG_SEARCH_TEXT,\r\n      success: ActionTypes.DIALOG_SEARCH_TEXT_SUCCESS,\r\n      failure: ActionTypes.DIALOG_SEARCH_TEXT_ERROR\r\n    }, { peer, query });\r\n  }\r\n\r\n  findAllDocs() {\r\n    const peer = DialogStore.getCurrentPeer();\r\n    dispatchAsync(ActorClient.findAllDocs(peer), {\r\n      request: ActionTypes.DIALOG_SEARCH_DOCS,\r\n      success: ActionTypes.DIALOG_SEARCH_DOCS_SUCCESS,\r\n      failure: ActionTypes.DIALOG_SEARCH_DOCS_ERROR\r\n    }, { peer });\r\n  }\r\n\r\n  findAllLinks() {\r\n    const peer = DialogStore.getCurrentPeer();\r\n    dispatchAsync(ActorClient.findAllLinks(peer), {\r\n      request: ActionTypes.DIALOG_SEARCH_LINKS,\r\n      success: ActionTypes.DIALOG_SEARCH_LINKS_SUCCESS,\r\n      failure: ActionTypes.DIALOG_SEARCH_LINKS_ERROR\r\n    }, { peer });\r\n  }\r\n\r\n  findAllPhotos() {\r\n    const peer = DialogStore.getCurrentPeer();\r\n    dispatchAsync(ActorClient.findAllPhotos(peer), {\r\n      request: ActionTypes.DIALOG_SEARCH_PHOTO,\r\n      success: ActionTypes.DIALOG_SEARCH_PHOTO_SUCCESS,\r\n      failure: ActionTypes.DIALOG_SEARCH_PHOTO_ERROR\r\n    }, { peer });\r\n  }\r\n}\r\n\r\nexport default new DialogSearchActionCreators();\r\n"]}