{"version":3,"sources":["../../../src/components/common/SelectList.react.js"],"names":["SelectContextType","shape","current","number","isRequired","setCurrent","func","SelectList","props","state","bind","handleSelect","handleKeyDown","shouldComponentUpdate","nextProps","nextState","children","max","className","getChildContext","select","pick","componentDidMount","document","addEventListener","componentWillUnmount","removeEventListener","onSelect","handleNext","next","handlePrevious","event","keyCode","ENTER","ARROW_UP","TAB","ARROW_DOWN","stopPropagation","preventDefault","render","setState","childContextTypes","propTypes","string","node"],"mappings":"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","file":"SelectList.react.js","sourcesContent":["/*\r\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport React, { Component, PropTypes } from 'react';\r\nimport { KeyCodes } from '../../constants/ActorAppConstants';\r\n\r\nexport const SelectContextType = PropTypes.shape({\r\n  current: PropTypes.number.isRequired,\r\n  setCurrent: PropTypes.func.isRequired\r\n});\r\n\r\nclass SelectList extends Component {\r\n  static childContextTypes = {\r\n    select: SelectContextType\r\n  };\r\n\r\n  static propTypes = {\r\n    className: PropTypes.string,\r\n    max: PropTypes.number.isRequired,\r\n    children: PropTypes.node.isRequired,\r\n    onSelect: PropTypes.func.isRequired\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      current: 0\r\n    };\r\n\r\n    this.setCurrent = this.setCurrent.bind(this);\r\n    this.handleSelect = this.handleSelect.bind(this);\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return nextState.current !== this.state.current ||\r\n           nextProps.children !== this.props.children ||\r\n           nextProps.max !== this.props.max ||\r\n           nextProps.className !== this.props.className;\r\n  }\r\n\r\n  getChildContext() {\r\n    return {\r\n      select: {\r\n        pick: this.handleSelect,\r\n        current: this.state.current,\r\n        setCurrent: this.setCurrent\r\n      }\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('keydown', this.handleKeyDown, false);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('keydown', this.handleKeyDown, false);\r\n  }\r\n\r\n  handleSelect() {\r\n    this.props.onSelect(this.state.current);\r\n  }\r\n\r\n  handleNext() {\r\n    const next = this.state.current + 1;\r\n    this.setCurrent(next > this.props.max ? 0 : next);\r\n  }\r\n\r\n  handlePrevious() {\r\n    const next = this.state.current - 1;\r\n    this.setCurrent(next < 0 ? this.props.max : next);\r\n  }\r\n\r\n  handleKeyDown(event) {\r\n    switch (event.keyCode) {\r\n      case KeyCodes.ENTER:\r\n        this.handleSelect();\r\n        break;\r\n\r\n      case KeyCodes.ARROW_UP:\r\n        this.handlePrevious();\r\n        break;\r\n\r\n      case KeyCodes.TAB:\r\n      case KeyCodes.ARROW_DOWN:\r\n        this.handleNext();\r\n        break;\r\n\r\n      default:\r\n        return;\r\n    }\r\n\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={this.props.className}>\r\n        {this.props.children}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  setCurrent(current) {\r\n    this.setState({ current });\r\n  }\r\n}\r\n\r\nexport default SelectList;\r\n"]}