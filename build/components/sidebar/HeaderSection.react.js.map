{"version":3,"sources":["../../../src/components/sidebar/HeaderSection.react.js"],"names":["HeaderSection","props","state","isOpened","openHelp","bind","openTwitter","openFacebook","openHomePage","setLogout","toggleHeaderMenu","closeHeaderMenu","openMyProfile","openCreateGroup","openAddContactModal","onSettingsOpen","getStores","calculateState","profile","getProfile","setState","document","addEventListener","removeEventListener","show","open","event","get","twitter","preventDefault","isElectron","handleLinkClick","window","facebook","homePage","then","setLoggedOut","renderTwitterLink","renderFacebookLink","renderHomeLink","renderHelpLink","helpPhone","test","render","headerClass","menuClass","avatar","placeholder","name","__html","create"],"mappings":"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","file":"HeaderSection.react.js","sourcesContent":["/*\r\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport { Container } from 'flux/utils';\r\nimport classnames from 'classnames';\r\nimport ActorClient from '../../utils/ActorClient';\r\nimport { escapeWithEmoji } from '../../utils/EmojiUtils'\r\nimport confirm from '../../utils/confirm'\r\nimport SharedContainer from '../../utils/SharedContainer';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport ProfileActionCreators from '../../actions/ProfileActionCreators';\r\nimport CreateGroupActionCreators from '../../actions/CreateGroupActionCreators';\r\nimport LoginActionCreators from '../../actions/LoginActionCreators';\r\nimport HelpActionCreators from '../../actions/HelpActionCreators';\r\nimport AddContactActionCreators from '../../actions/AddContactActionCreators';\r\nimport PreferencesActionCreators from '../../actions/PreferencesActionCreators';\r\n\r\nimport ProfileStore from '../../stores/ProfileStore';\r\n\r\nimport SvgIcon from '../common/SvgIcon.react';\r\nimport AvatarItem from '../common/AvatarItem.react';\r\n\r\nclass HeaderSection extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isOpened: false\r\n    }\r\n\r\n    this.openHelp = this.openHelp.bind(this);\r\n    this.openTwitter = this.openTwitter.bind(this);\r\n    this.openFacebook = this.openFacebook.bind(this);\r\n    this.openHomePage = this.openHomePage.bind(this);\r\n    this.setLogout = this.setLogout.bind(this);\r\n    this.toggleHeaderMenu = this.toggleHeaderMenu.bind(this);\r\n    this.closeHeaderMenu = this.closeHeaderMenu.bind(this);\r\n    this.openMyProfile = this.openMyProfile.bind(this);\r\n    this.openCreateGroup = this.openCreateGroup.bind(this);\r\n    this.openAddContactModal = this.openAddContactModal.bind(this);\r\n    this.onSettingsOpen = this.onSettingsOpen.bind(this);\r\n  }\r\n\r\n  static getStores() {\r\n    return [ProfileStore];\r\n  }\r\n\r\n  static calculateState() {\r\n    return {\r\n      profile: ProfileStore.getProfile()\r\n    }\r\n  }\r\n\r\n  toggleHeaderMenu() {\r\n    const { isOpened } = this.state;\r\n\r\n    if (!isOpened) {\r\n      this.setState({ isOpened: true });\r\n      document.addEventListener('click', this.closeHeaderMenu, false);\r\n    } else {\r\n      this.closeHeaderMenu();\r\n    }\r\n  }\r\n\r\n  closeHeaderMenu() {\r\n    this.setState({ isOpened: false });\r\n    document.removeEventListener('click', this.closeHeaderMenu, false);\r\n  }\r\n\r\n  openMyProfile() {\r\n    ProfileActionCreators.show();\r\n  }\r\n\r\n  openCreateGroup() {\r\n    CreateGroupActionCreators.open();\r\n  }\r\n\r\n  openAddContactModal() {\r\n    AddContactActionCreators.open();\r\n  }\r\n\r\n  onSettingsOpen() {\r\n    PreferencesActionCreators.show();\r\n  }\r\n\r\n  openHelp() {\r\n    HelpActionCreators.open()\r\n  }\r\n\r\n  openTwitter(event) {\r\n    const { twitter } = SharedContainer.get();\r\n\r\n    event.preventDefault();\r\n    if (ActorClient.isElectron()) {\r\n      ActorClient.handleLinkClick(event);\r\n    } else {\r\n      window.open(`https://twitter.com/${twitter}`, '_blank');\r\n    }\r\n  }\r\n\r\n  openFacebook(event) {\r\n    const { facebook } = SharedContainer.get();\r\n\r\n    event.preventDefault();\r\n    if (ActorClient.isElectron()) {\r\n      ActorClient.handleLinkClick(event);\r\n    } else {\r\n      window.open(`https://facebook.com/${facebook}`, '_blank');\r\n    }\r\n  }\r\n\r\n  openHomePage(event) {\r\n    const { homePage } = SharedContainer.get();\r\n\r\n    event.preventDefault();\r\n    if (ActorClient.isElectron()) {\r\n      ActorClient.handleLinkClick(event);\r\n    } else {\r\n      window.open(homePage, '_blank');\r\n    }\r\n  }\r\n\r\n  setLogout() {\r\n    confirm(<FormattedMessage id=\"modal.confirm.logout\"/>).then(\r\n      () => LoginActionCreators.setLoggedOut(),\r\n      () => {}\r\n    );\r\n  }\r\n\r\n  renderTwitterLink() {\r\n    const { twitter } = SharedContainer.get();\r\n    if (!twitter) return null;\r\n\r\n    return (\r\n      <li className=\"dropdown__menu__item\">\r\n        <a href={`https://twitter.com/${twitter}`} onClick={this.openTwitter}>\r\n          <SvgIcon className=\"icon icon--dropdown sidebar__header__twitter\" glyph=\"twitter\" />\r\n          <FormattedMessage id=\"menu.twitter\"/>\r\n        </a>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  renderFacebookLink() {\r\n    const { facebook } = SharedContainer.get();\r\n    if (!facebook) return null;\r\n\r\n    return (\r\n      <li className=\"dropdown__menu__item\">\r\n        <a href={`https://facebook.com/${facebook}`} onClick={this.openFacebook}>\r\n          <SvgIcon className=\"icon icon--dropdown sidebar__header__facebook\" glyph=\"facebook\" />\r\n          <FormattedMessage id=\"menu.facebook\"/>\r\n        </a>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  renderHomeLink() {\r\n    const { homePage } = SharedContainer.get();\r\n    if (!homePage) return null;\r\n\r\n    return (\r\n      <li className=\"dropdown__menu__item\">\r\n        <a href={homePage} onClick={this.openHomePage}>\r\n          <i className=\"material-icons\">public</i>\r\n          <FormattedMessage id=\"menu.homePage\"/>\r\n        </a>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  renderHelpLink() {\r\n    const { helpPhone } = SharedContainer.get();\r\n    if (!helpPhone) return null;\r\n\r\n    if (/@/.test(helpPhone)) {\r\n      return (\r\n        <li className=\"dropdown__menu__item\">\r\n          <a href={`mailto:${helpPhone}`}>\r\n            <i className=\"material-icons\">help</i>\r\n            <FormattedMessage id=\"menu.helpAndFeedback\"/>\r\n          </a>\r\n        </li>\r\n      );\r\n    } else {\r\n      return (\r\n        <li className=\"dropdown__menu__item\" onClick={this.openHelp}>\r\n          <i className=\"material-icons\">help</i>\r\n          <FormattedMessage id=\"menu.helpAndFeedback\"/>\r\n        </li>\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { profile, isOpened } = this.state;\r\n\r\n    if (!profile) return null;\r\n\r\n    const headerClass = classnames('sidebar__header', 'sidebar__header--clickable', {\r\n      'sidebar__header--opened': isOpened\r\n    });\r\n    const menuClass = classnames('dropdown', {\r\n      'dropdown--opened': isOpened\r\n    });\r\n\r\n    return (\r\n      <header className={headerClass}>\r\n        <div className=\"sidebar__header__user row\" onClick={this.toggleHeaderMenu}>\r\n          <AvatarItem\r\n            className=\"sidebar__avatar\"\r\n            image={profile.avatar}\r\n            placeholder={profile.placeholder}\r\n            size=\"tiny\"\r\n            title={profile.name}\r\n          />\r\n          <span className=\"sidebar__header__user__name col-xs\"\r\n                dangerouslySetInnerHTML={{ __html: escapeWithEmoji(profile.name) }}/>\r\n          <div className={menuClass}>\r\n            <span className=\"dropdown__button\">\r\n              <i className=\"material-icons\">arrow_drop_down</i>\r\n            </span>\r\n            <ul className=\"dropdown__menu dropdown__menu--right\">\r\n              <li className=\"dropdown__menu__item\" onClick={this.openMyProfile}>\r\n                <i className=\"material-icons\">edit</i>\r\n                <FormattedMessage id=\"menu.editProfile\"/>\r\n              </li>\r\n              <li className=\"dropdown__menu__item\" onClick={this.openAddContactModal}>\r\n                <i className=\"material-icons\">person_add</i>\r\n                <FormattedMessage id=\"menu.addToContacts\"/>\r\n              </li>\r\n              <li className=\"dropdown__menu__item\" onClick={this.openCreateGroup}>\r\n                <i className=\"material-icons\">group_add</i>\r\n                <FormattedMessage id=\"menu.createGroup\"/>\r\n              </li>\r\n              <li className=\"dropdown__menu__separator\"/>\r\n              <li className=\"dropdown__menu__item\" onClick={this.onSettingsOpen}>\r\n                <i className=\"material-icons\">settings</i>\r\n                <FormattedMessage id=\"menu.preferences\"/>\r\n              </li>\r\n\r\n              {this.renderHelpLink()}\r\n              {this.renderTwitterLink()}\r\n              {this.renderFacebookLink()}\r\n              {this.renderHomeLink()}\r\n\r\n              <li className=\"dropdown__menu__separator\"/>\r\n              <li className=\"dropdown__menu__item\" onClick={this.setLogout}>\r\n                <FormattedMessage id=\"menu.signOut\"/>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </header>\r\n    );\r\n\r\n  }\r\n}\r\n\r\nexport default Container.create(HeaderSection);\r\n"]}