{"version":3,"sources":["../../../../src/components/modals/preferences/BlockedUsers.react.js"],"names":["BlockedUsers","getStores","calculateState","getState","props","context","handleQueryChange","bind","handleUnblock","componentWillMount","loadUsers","event","setQuery","target","value","uid","unblockUser","getUsers","state","users","query","filter","user","score","name","renderUsers","length","filtredUsers","map","id","placeholder","avatar","renderSearch","intl","messages","render","contextTypes","object","create"],"mappings":"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","file":"BlockedUsers.react.js","sourcesContent":["/*\r\n * Copyright (C) 2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport React, { Component, PropTypes } from 'react';\r\nimport { Container } from 'flux/utils';\r\nimport fuzzaldrin from 'fuzzaldrin';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport BlockedUsersActionCreators from '../../../actions/BlockedUsersActionCreators';\r\n\r\nimport BlockedUsersStore from '../../../stores/BlockedUsersStore';\r\n\r\nimport ContactItem from '../../common/ContactItem.react';\r\n\r\nclass BlockedUsers extends Component {\r\n  static contextTypes = {\r\n    intl: PropTypes.object\r\n  };\r\n\r\n  static getStores() {\r\n    return [BlockedUsersStore];\r\n  }\r\n\r\n  static calculateState() {\r\n    return BlockedUsersStore.getState();\r\n  }\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.handleQueryChange = this.handleQueryChange.bind(this);\r\n    this.handleUnblock = this.handleUnblock.bind(this);\r\n  }\r\n\r\n  componentWillMount() {\r\n    BlockedUsersActionCreators.loadUsers();\r\n  }\r\n\r\n  handleQueryChange(event) {\r\n    BlockedUsersActionCreators.setQuery(event.target.value);\r\n  }\r\n\r\n  handleUnblock(uid) {\r\n    BlockedUsersActionCreators.unblockUser(uid, true);\r\n  }\r\n\r\n  getUsers() {\r\n    const { users, query } = this.state;\r\n\r\n    if (!query || query === '') return users;\r\n\r\n    return users.filter((user) => {\r\n      const score = fuzzaldrin.score(user.name, query);\r\n      return score > 0;\r\n    });\r\n  }\r\n\r\n  renderUsers() {\r\n    const { users } = this.state;\r\n\r\n    if (!users.length) {\r\n      return (\r\n        <div className=\"contacts__list__item contacts__list__item--empty text-center\">\r\n          <FormattedMessage id=\"preferences.blocked.notExists\"/>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const filtredUsers = this.getUsers();\r\n\r\n    if (!filtredUsers.length) {\r\n      return (\r\n        <div className=\"contacts__list__item contacts__list__item--empty text-center\">\r\n          <FormattedMessage id=\"preferences.blocked.notFound\"/>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return filtredUsers.map((user) => {\r\n      return (\r\n        <ContactItem\r\n          uid={user.id}\r\n          name={user.name}\r\n          placeholder={user.placeholder}\r\n          avatar={user.avatar}\r\n          key={user.id}\r\n        >\r\n          <button className=\"button button--lightblue\" onClick={() => this.handleUnblock(user.id)}>\r\n            <FormattedMessage id=\"preferences.blocked.unblock\"/>\r\n          </button>\r\n        </ContactItem>\r\n      );\r\n    });\r\n  }\r\n\r\n  renderSearch() {\r\n    const { intl } = this.context;\r\n    const { query } = this.state;\r\n\r\n    return (\r\n      <div className=\"small-search\">\r\n        <i className=\"material-icons\">search</i>\r\n        <input\r\n          className=\"input\"\r\n          type=\"search\"\r\n          value={query}\r\n          placeholder={intl.messages['preferences.blocked.search']}\r\n          onChange={this.handleQueryChange}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"preferences__tabs__content blocked-users\">\r\n        <ul>\r\n          <li>\r\n            <i className=\"icon material-icons\">block</i>\r\n            <FormattedMessage id=\"preferences.blocked.title\" tagName=\"h4\"/>\r\n            {this.renderSearch()}\r\n            {this.renderUsers()}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Container.create(BlockedUsers);\r\n"]}