{"version":3,"sources":["../../../src/components/modals/EditGroup.react.js"],"names":["EditGroup","getStores","calculateState","group","getGroup","isAdmin","title","getTitle","about","getAbout","restrictedDomains","getRestrictedDomains","props","handleClose","bind","handleTitleChange","handleAboutChange","handleRestrictedDomainsChange","handleSave","handleChangeGroupAvatar","handleRemoveGroupPicture","hide","event","setState","target","value","state","editGroupTitle","id","editGroupAbout","editGroupRestrictedDomains","croppedImage","changeGroupAvatar","removeGroupAvatar","renderTitle","renderAbout","renderRestrictedDomains","render","EDIT_GROUP","create","pure"],"mappings":"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","file":"EditGroup.react.js","sourcesContent":["/*\n * Copyright (C) 2016 Actor LLC. <https://actor.im>\n */\n\nimport React, { Component } from 'react';\nimport { Container } from 'flux/utils';\nimport { FormattedMessage } from 'react-intl';\nimport Modal from 'react-modal';\nimport { ModalTypes } from '../../constants/ActorAppConstants';\n\nimport EditGroupStore from '../../stores/EditGroupStore';\n\nimport EditGroupActionCreators from '../../actions/EditGroupActionCreators';\n\nimport TextField from '../common/TextField.react';\nimport PictureChanger from './profile/PictureChanger.react';\n\nclass EditGroup extends Component {\n  static getStores() {\n    return [EditGroupStore];\n  }\n\n  static calculateState() {\n    return {\n      group: EditGroupStore.getGroup(),\n      isAdmin: EditGroupStore.isAdmin(),\n      title: EditGroupStore.getTitle(),\n      about: EditGroupStore.getAbout(),\n      restrictedDomains: EditGroupStore.getRestrictedDomains()\n    }\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.handleClose = this.handleClose.bind(this);\n    this.handleTitleChange = this.handleTitleChange.bind(this);\n    this.handleAboutChange = this.handleAboutChange.bind(this);\n    this.handleRestrictedDomainsChange = this.handleRestrictedDomainsChange.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleChangeGroupAvatar = this.handleChangeGroupAvatar.bind(this);\n    this.handleRemoveGroupPicture = this.handleRemoveGroupPicture.bind(this);\n  }\n\n  handleClose() {\n    EditGroupActionCreators.hide();\n  }\n\n  handleTitleChange(event) {\n    this.setState({ title: event.target.value });\n  }\n\n  handleAboutChange(event) {\n    this.setState({ about: event.target.value });\n  }\n\n  handleRestrictedDomainsChange(event) {\n    this.setState({ restrictedDomains: event.target.value });\n  }\n\n  handleSave() {\n    const { group, title, about, isAdmin, restrictedDomains } = this.state;\n    EditGroupActionCreators.editGroupTitle(group.id, title);\n    if (isAdmin) {\n      EditGroupActionCreators.editGroupAbout(group.id, about);\n      EditGroupActionCreators.editGroupRestrictedDomains(group.id, restrictedDomains);\n    }\n    this.handleClose();\n  }\n\n  handleChangeGroupAvatar(croppedImage) {\n    const { group } = this.state;\n    EditGroupActionCreators.changeGroupAvatar(group.id, croppedImage);\n  }\n\n  handleRemoveGroupPicture() {\n    const { group } = this.state;\n    EditGroupActionCreators.removeGroupAvatar(group.id);\n  }\n\n  renderTitle() {\n    const { title } = this.state;\n    return (\n      <TextField\n        className=\"input__material--wide\"\n        floatingLabel={<FormattedMessage id=\"modal.group.name\"/>}\n        onChange={this.handleTitleChange}\n        ref=\"groupTitle\"\n        value={title}/>\n    );\n  }\n\n  renderAbout() {\n    const { isAdmin, about } = this.state;\n    if (!isAdmin) return null;\n    return (\n      <div className=\"about\">\n        <label htmlFor=\"about\"><FormattedMessage id=\"modal.group.about\"/></label>\n        <textarea className=\"textarea\" value={about} onChange={this.handleAboutChange} id=\"about\"/>\n      </div>\n    );\n  }\n\n  renderRestrictedDomains(){\n     const { isAdmin, restrictedDomains } = this.state;\n     if (!isAdmin) return null;\n     return (\n      <TextField\n          className=\"input__material--wide\"\n          floatingLabel={\"Restricted Domains\"}\n          onChange={this.handleRestrictedDomainsChange}\n          ref=\"restrictedDomains\"\n          value={restrictedDomains}/>\n     );\n  }\n\n  render() {\n    const { group } = this.state;\n\n    return (\n      <Modal\n        overlayClassName=\"modal-overlay\"\n        className=\"modal\"\n        onRequestClose={this.handleClose}\n        isOpen>\n\n        <div className=\"edit-group\">\n          <div className=\"modal__content\">\n\n            <header className=\"modal__header\">\n              <i className=\"modal__header__icon material-icons\">edit</i>\n              <FormattedMessage id=\"modal.group.title\" tagName=\"h1\"/>\n              <button className=\"button button--lightblue\" onClick={this.handleSave}>\n                <FormattedMessage id=\"button.done\"/>\n              </button>\n            </header>\n\n            <div className=\"modal__body row\">\n              <div className=\"col-xs\">\n                {this.renderTitle()}\n                {this.renderAbout()}\n                {this.renderRestrictedDomains()}\n              </div>\n\n              <PictureChanger {...group}\n                small\n                fromModal={ModalTypes.EDIT_GROUP}\n                onRemove={this.handleRemoveGroupPicture}\n                onChange={this.handleChangeGroupAvatar}/>\n            </div>\n\n          </div>\n        </div>\n\n      </Modal>\n    );\n  }\n}\n\nexport default Container.create(EditGroup, { pure: false });\n"]}