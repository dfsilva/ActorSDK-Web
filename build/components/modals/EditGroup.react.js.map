{"version":3,"sources":["../../../src/components/modals/EditGroup.react.js"],"names":["EditGroup","getStores","calculateState","group","getGroup","isAdmin","title","getTitle","about","getAbout","restrictedDomains","getRestrictedDomains","props","handleClose","bind","handleTitleChange","handleAboutChange","handleRestrictedDomainsChange","handleSave","handleChangeGroupAvatar","handleRemoveGroupPicture","hide","event","setState","target","value","state","editGroupTitle","id","editGroupAbout","editGroupRestrictedDomains","croppedImage","changeGroupAvatar","removeGroupAvatar","renderTitle","renderAbout","renderRestrictedDomains","render","EDIT_GROUP","create","pure"],"mappings":"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","file":"EditGroup.react.js","sourcesContent":["/*\r\n * Copyright (C) 2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport { Container } from 'flux/utils';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Modal from 'react-modal';\r\nimport { ModalTypes } from '../../constants/ActorAppConstants';\r\n\r\nimport EditGroupStore from '../../stores/EditGroupStore';\r\n\r\nimport EditGroupActionCreators from '../../actions/EditGroupActionCreators';\r\n\r\nimport TextField from '../common/TextField.react';\r\nimport PictureChanger from './profile/PictureChanger.react';\r\n\r\nclass EditGroup extends Component {\r\n  static getStores() {\r\n    return [EditGroupStore];\r\n  }\r\n\r\n  static calculateState() {\r\n    return {\r\n      group: EditGroupStore.getGroup(),\r\n      isAdmin: EditGroupStore.isAdmin(),\r\n      title: EditGroupStore.getTitle(),\r\n      about: EditGroupStore.getAbout(),\r\n      restrictedDomains: EditGroupStore.getRestrictedDomains()\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.handleTitleChange = this.handleTitleChange.bind(this);\r\n    this.handleAboutChange = this.handleAboutChange.bind(this);\r\n    this.handleRestrictedDomainsChange = this.handleRestrictedDomainsChange.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.handleChangeGroupAvatar = this.handleChangeGroupAvatar.bind(this);\r\n    this.handleRemoveGroupPicture = this.handleRemoveGroupPicture.bind(this);\r\n  }\r\n\r\n  handleClose() {\r\n    EditGroupActionCreators.hide();\r\n  }\r\n\r\n  handleTitleChange(event) {\r\n    this.setState({ title: event.target.value });\r\n  }\r\n\r\n  handleAboutChange(event) {\r\n    this.setState({ about: event.target.value });\r\n  }\r\n\r\n  handleRestrictedDomainsChange(event) {\r\n    this.setState({ restrictedDomains: event.target.value });\r\n  }\r\n\r\n  handleSave() {\r\n    const { group, title, about, isAdmin, restrictedDomains } = this.state;\r\n    EditGroupActionCreators.editGroupTitle(group.id, title);\r\n    if (isAdmin) {\r\n      EditGroupActionCreators.editGroupAbout(group.id, about);\r\n      EditGroupActionCreators.editGroupRestrictedDomains(group.id, restrictedDomains);\r\n    }\r\n    this.handleClose();\r\n  }\r\n\r\n  handleChangeGroupAvatar(croppedImage) {\r\n    const { group } = this.state;\r\n    EditGroupActionCreators.changeGroupAvatar(group.id, croppedImage);\r\n  }\r\n\r\n  handleRemoveGroupPicture() {\r\n    const { group } = this.state;\r\n    EditGroupActionCreators.removeGroupAvatar(group.id);\r\n  }\r\n\r\n  renderTitle() {\r\n    const { title } = this.state;\r\n    return (\r\n      <TextField\r\n        className=\"input__material--wide\"\r\n        floatingLabel={<FormattedMessage id=\"modal.group.name\"/>}\r\n        onChange={this.handleTitleChange}\r\n        ref=\"groupTitle\"\r\n        value={title}/>\r\n    );\r\n  }\r\n\r\n  renderAbout() {\r\n    const { isAdmin, about } = this.state;\r\n    if (!isAdmin) return null;\r\n    return (\r\n      <div className=\"about\">\r\n        <label htmlFor=\"about\"><FormattedMessage id=\"modal.group.about\"/></label>\r\n        <textarea className=\"textarea\" value={about} onChange={this.handleAboutChange} id=\"about\"/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderRestrictedDomains(){\r\n     const { isAdmin, restrictedDomains } = this.state;\r\n     if (!isAdmin) return null;\r\n     return (\r\n      <TextField\r\n          className=\"input__material--wide\"\r\n          floatingLabel={\"Restricted Domains\"}\r\n          onChange={this.handleRestrictedDomainsChange}\r\n          ref=\"restrictedDomains\"\r\n          value={restrictedDomains}/>\r\n     );\r\n  }\r\n\r\n  render() {\r\n    const { group } = this.state;\r\n\r\n    return (\r\n      <Modal\r\n        overlayClassName=\"modal-overlay\"\r\n        className=\"modal\"\r\n        onRequestClose={this.handleClose}\r\n        isOpen>\r\n\r\n        <div className=\"edit-group\">\r\n          <div className=\"modal__content\">\r\n\r\n            <header className=\"modal__header\">\r\n              <i className=\"modal__header__icon material-icons\">edit</i>\r\n              <FormattedMessage id=\"modal.group.title\" tagName=\"h1\"/>\r\n              <button className=\"button button--lightblue\" onClick={this.handleSave}>\r\n                <FormattedMessage id=\"button.done\"/>\r\n              </button>\r\n            </header>\r\n\r\n            <div className=\"modal__body row\">\r\n              <div className=\"col-xs\">\r\n                {this.renderTitle()}\r\n                {this.renderAbout()}\r\n                {this.renderRestrictedDomains()}\r\n              </div>\r\n\r\n              <PictureChanger {...group}\r\n                small\r\n                fromModal={ModalTypes.EDIT_GROUP}\r\n                onRemove={this.handleRemoveGroupPicture}\r\n                onChange={this.handleChangeGroupAvatar}/>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Container.create(EditGroup, { pure: false });\r\n"]}