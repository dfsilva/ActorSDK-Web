{"version":3,"sources":["../../src/components/Activity.react.js"],"names":["ActivitySection","getStores","calculateState","peer","getCurrentPeer","info","getState","isOpen","props","shouldComponentUpdate","bind","componentDidUpdate","setImmediate","window","dispatchEvent","Event","renderBody","state","type","USER","GROUP","render","create"],"mappings":";;;;AAIA;;;;AACA;;AACA;;AACA;;AAEA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;+eAdA;;;;IAgBMA,e;;;kBACGC,S,wBAAY;AACjB,WAAO,2EAAP;AACD,G;;kBAEMC,c,6BAAiB;AACtB,WAAO;AACLC,YAAM,sBAAYC,cAAZ,EADD;AAELC,YAAM,0BAAgBC,QAAhB,EAFD;AAGLC,cAAQ,wBAAcA,MAAd;AAHH,KAAP;AAKD,G;;AAED,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA,iDACjB,sBAAMA,KAAN,CADiB;;AAGjB,UAAKC,qBAAL,GAA6B,kDAAsBC,IAAtB,OAA7B;AAHiB;AAIlB;;4BAEDC,kB,iCAAqB;AACnBC,iBAAa,YAAM;AACjBC,aAAOC,aAAP,CAAqB,IAAIC,KAAJ,CAAU,QAAV,CAArB;AACD,KAFD;AAGD,G;;4BAEDC,U,yBAAa;AAAA,iBACY,KAAKC,KADjB;AAAA,QACHd,IADG,UACHA,IADG;AAAA,QACGE,IADH,UACGA,IADH;;;AAGX,YAAQF,KAAKe,IAAb;AACE,WAAK,6BAAUC,IAAf;AACE,eAAO,uDAAa,MAAMd,IAAnB,GAAP;AACF,WAAK,6BAAUe,KAAf;AACE,eAAO,wDAAc,OAAOf,IAArB,GAAP;AACF;AACE,eAAO,IAAP;AANJ;AAQD,G;;4BAEDgB,M,qBAAS;AAAA,kBACkB,KAAKJ,KADvB;AAAA,QACCd,IADD,WACCA,IADD;AAAA,QACOI,MADP,WACOA,MADP;;AAEP,QAAI,CAACA,MAAD,IAAW,CAACJ,IAAhB,EAAsB;AACpB,aAAO,2CAAS,WAAU,UAAnB,GAAP;AACD;;AAED,WACE;AAAA;AAAA,QAAS,WAAU,0BAAnB;AACG,WAAKa,UAAL;AADH,KADF;AAKD,G;;;;;kBAGY,iBAAUM,MAAV,CAAiBtB,eAAjB,C","file":"Activity.react.js","sourcesContent":["/*\r\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport { shouldComponentUpdate } from 'react-addons-pure-render-mixin';\r\nimport { Container } from 'flux/utils';\r\nimport { PeerTypes } from '../constants/ActorAppConstants';\r\n\r\nimport ActivityStore from '../stores/ActivityStore';\r\nimport DialogStore from '../stores/DialogStore';\r\nimport DialogInfoStore from '../stores/DialogInfoStore';\r\n\r\nimport UserProfile from './activity/UserProfile.react';\r\nimport GroupProfile from './activity/GroupProfile.react';\r\n\r\nclass ActivitySection extends Component {\r\n  static getStores() {\r\n    return [DialogStore, DialogInfoStore, ActivityStore];\r\n  }\r\n\r\n  static calculateState() {\r\n    return {\r\n      peer: DialogStore.getCurrentPeer(),\r\n      info: DialogInfoStore.getState(),\r\n      isOpen: ActivityStore.isOpen()\r\n    };\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.shouldComponentUpdate = shouldComponentUpdate.bind(this);\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    setImmediate(() => {\r\n      window.dispatchEvent(new Event('resize'));\r\n    });\r\n  }\r\n\r\n  renderBody() {\r\n    const { peer, info } = this.state;\r\n\r\n    switch (peer.type) {\r\n      case PeerTypes.USER:\r\n        return <UserProfile user={info} />;\r\n      case PeerTypes.GROUP:\r\n        return <GroupProfile group={info} />;\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { peer, isOpen } = this.state;\r\n    if (!isOpen || !peer) {\r\n      return <section className=\"activity\" />;\r\n    }\r\n\r\n    return (\r\n      <section className=\"activity activity--shown\">\r\n        {this.renderBody()}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Container.create(ActivitySection);\r\n"]}