{"version":3,"sources":["../../src/components/Grouppre.react.js"],"names":["Grouppre","getStores","calculateState","parentId","getParentId","isLoading","getIsLoading","isLoaded","getIsLoaded","isGroupsLoaded","getIsGroupsLoaded","groups","getGroups","props","componentWillMount","componentWillUnmount","removeBindings","componentDidUpdate","checkGroupspreLoaded","state","loadGroups","componentDidMount","showGroupsPre","render","archiveClassname","groupsList","grouppre","index","groupId","hasChildren","group","getGroup","groupPeer","getGroupPeer","isMember","key","avatar","placeholder","name","restrictedDomains","about","shortName","length","create","pure"],"mappings":"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","file":"Grouppre.react.js","sourcesContent":["/*\r\n * Copyright (C) 2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport { map, debounce } from 'lodash';\r\nimport React, { Component} from 'react';\r\nimport { Container } from 'flux/utils';\r\nimport classnames from 'classnames';\r\nimport { Link } from 'react-router';\r\n\r\nimport GrouppreStore from '../stores/GrouppreStore';\r\nimport GroupPreActionCreators from \"../actions/GroupPreActionCreators\";\r\n\r\nimport AvatarItem from './common/AvatarItem.react';\r\nimport Scrollbar from './common/Scrollbar.react';\r\nimport ActorClient from \"../utils/ActorClient\";\r\n\r\nclass Grouppre extends Component {\r\n\r\n  static getStores() {\r\n    return [GrouppreStore];\r\n  }\r\n\r\n  static calculateState() {\r\n    return {\r\n      parentId: GrouppreStore.getParentId(),\r\n      isLoading: GrouppreStore.getIsLoading(),\r\n      isLoaded: GrouppreStore.getIsLoaded(),\r\n      isGroupsLoaded: GrouppreStore.getIsGroupsLoaded(),\r\n      groups: GrouppreStore.getGroups()\r\n    }\r\n  }\r\n\r\n  constructor(props){\r\n     super(props);\r\n  }\r\n\r\n  componentWillMount() {\r\n  }\r\n\r\n  componentWillUnmount() {\r\n      GroupPreActionCreators.removeBindings('groupspre');\r\n  }\r\n\r\n  componentDidUpdate() {\r\n      this.checkGroupspreLoaded();\r\n  }\r\n\r\n  checkGroupspreLoaded(){\r\n      const {isLoaded, isGroupsLoaded} = this.state;\r\n      if(isLoaded && !isGroupsLoaded) {\r\n        GroupPreActionCreators.loadGroups();\r\n      }\r\n  }\r\n\r\n  componentDidMount() {\r\n      const {parentId} = this.state\r\n      GroupPreActionCreators.showGroupsPre(parentId);\r\n  }\r\n\r\n  render() {\r\n    const { isLoading, groups } = this.state;\r\n\r\n    const archiveClassname = classnames('archive-section', {\r\n      'archive-section--loading': isLoading\r\n    });\r\n\r\n    const groupsList = map(groups, (grouppre, index) => {\r\n        const { groupId, parentId, hasChildren } = grouppre;\r\n        const group = ActorClient.getGroup(groupId);\r\n        const groupPeer = ActorClient.getGroupPeer(groupId);\r\n        return (\r\n            <div className=\"archive-section__list__item col-xs-12 col-sm-12 col-md-12 col-lg-12\" key={index}>\r\n                {group.isMember ?\r\n                    <Link to={`/im/${groupPeer.key}`} className=\"archive-item row\">\r\n                        <div className=\"archive-item__user margin_top_8px\">\r\n                            <AvatarItem\r\n                                className=\"archive-item__avatar\"\r\n                                size=\"medium\"\r\n                                image={group.avatar}\r\n                                placeholder={group.placeholder}\r\n                                title={group.name}\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-xs\">\r\n                            <h4 className=\"archive-item__title\">{group.name}{group.restrictedDomains ? \" (\"+group.restrictedDomains+\")\" : \"\"}</h4>\r\n                            <div className=\"archive-item__subtitle\">{group.about}</div>\r\n                        </div>\r\n                    </Link>\r\n                    :\r\n                    <Link to={`/im/join/${group.shortName}`} className=\"archive-item row\">\r\n                        <div className=\"archive-item__user margin_top_8px\">\r\n                            <AvatarItem\r\n                                className=\"archive-item__avatar\"\r\n                                size=\"medium\"\r\n                                image={group.avatar}\r\n                                placeholder={group.placeholder}\r\n                                title={group.name}\r\n                            />\r\n                        </div>\r\n                        <div className=\"col-xs\">\r\n                            <h4 className=\"archive-item__title\">{group.name}{group.restrictedDomains ? \" (\"+group.restrictedDomains+\")\" : \"\"}</h4>\r\n                            <div className=\"archive-item__subtitle\">{group.about}</div>\r\n                        </div>\r\n                    </Link>\r\n                }\r\n            </div>\r\n        )\r\n    });\r\n\r\n      return (\r\n          <section className=\"main\">\r\n              <header className=\"toolbar row color--white\">\r\n                  <h3>Predefined Groups</h3>\r\n              </header>\r\n              <div className=\"flexrow\">\r\n                  <section className={archiveClassname}>\r\n                      <Scrollbar ref=\"archiveScroll\">\r\n                          <div className=\"archive-section__list row\">\r\n                              {\r\n                                  groups.length !== 0 ?\r\n                                      groupsList :\r\n                                      !isLoading\r\n                                      ? <div className=\"archive-section__list__item archive-section__list__item--empty col-xs-12\">\r\n                                          <h3>No predefined groups</h3>\r\n                                        </div>\r\n                                      : null\r\n                              }\r\n                              {\r\n                                  isLoading\r\n                                      ? <div className=\"archive-section__list__item archive-section__list__item--loading col-xs-12 col-sm-12 col-md-12 col-lg-12\">\r\n                                          <div className=\"preloader\"><div/><div/><div/><div/><div/></div>\r\n                                      </div>\r\n                                      : null\r\n                              }\r\n                          </div>\r\n                      </Scrollbar>\r\n                  </section>\r\n              </div>\r\n          </section>\r\n      );\r\n  }\r\n}\r\n\r\nexport default Container.create(Grouppre, { pure: false });\r\n"]}