{"version":3,"sources":["../../src/components/Grouppre.react.js"],"names":["Grouppre","getStores","calculateState","parentId","getParentId","isLoading","getIsLoading","isAllLoaded","getIsLoaded","groups","getGroups","props","componentWillMount","componentWillUnmount","removeBindings","componentDidUpdate","componentDidMount","state","showGroupsPre","render","archiveClassname","groupsList","grouppre","index","groupId","hasChildren","group","getGroup","groupPeer","getGroupPeer","isMember","key","avatar","placeholder","name","restrictedDomains","about","shortName","length","create","pure"],"mappings":"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","file":"Grouppre.react.js","sourcesContent":["/*\n * Copyright (C) 2016 Actor LLC. <https://actor.im>\n */\n\nimport { map, debounce } from 'lodash';\nimport React, { Component} from 'react';\nimport { Container } from 'flux/utils';\nimport classnames from 'classnames';\nimport { Link } from 'react-router';\n\nimport GrouppreStore from '../stores/GrouppreStore';\nimport GroupPreActionCreators from \"../actions/GroupPreActionCreators\";\n\nimport AvatarItem from './common/AvatarItem.react';\nimport Scrollbar from './common/Scrollbar.react';\nimport ActorClient from \"../utils/ActorClient\";\n\nclass Grouppre extends Component {\n\n  static getStores() {\n    return [GrouppreStore];\n  }\n\n  static calculateState() {\n    return {\n      parentId: GrouppreStore.getParentId(),\n      isLoading: GrouppreStore.getIsLoading(),\n      isAllLoaded: GrouppreStore.getIsLoaded(),\n      groups: GrouppreStore.getGroups()\n    }\n  }\n\n  constructor(props){\n     super(props);\n  }\n\n  componentWillMount() {\n  }\n\n  componentWillUnmount() {\n      GroupPreActionCreators.removeBindings('groupspre');\n  }\n\n  componentDidUpdate() {\n  }\n\n  componentDidMount() {\n      const {parentId} = this.state\n      GroupPreActionCreators.showGroupsPre(parentId);\n  }\n\n  render() {\n    const { isLoading, groups } = this.state;\n\n    const archiveClassname = classnames('archive-section', {\n      'archive-section--loading': isLoading\n    });\n\n    const groupsList = map(groups, (grouppre, index) => {\n        const { groupId, parentId, hasChildren } = grouppre;\n        const group = ActorClient.getGroup(groupId);\n        const groupPeer = ActorClient.getGroupPeer(groupId);\n        return (\n            <div className=\"archive-section__list__item col-xs-12 col-sm-12 col-md-12 col-lg-12\" key={index}>\n                {group.isMember ?\n                    <Link to={`/im/${groupPeer.key}`} className=\"archive-item row\">\n                        <div className=\"archive-item__user margin_top_8px\">\n                            <AvatarItem\n                                className=\"archive-item__avatar\"\n                                size=\"medium\"\n                                image={group.avatar}\n                                placeholder={group.placeholder}\n                                title={group.name}\n                            />\n                        </div>\n                        <div className=\"col-xs\">\n                            <h4 className=\"archive-item__title\">{group.name}{group.restrictedDomains ? \" (\"+group.restrictedDomains+\")\" : \"\"}</h4>\n                            <div className=\"archive-item__subtitle\">{group.about}</div>\n                        </div>\n                    </Link>\n                    :\n                    <Link to={`/im/join/${group.shortName}`} className=\"archive-item row\">\n                        <div className=\"archive-item__user margin_top_8px\">\n                            <AvatarItem\n                                className=\"archive-item__avatar\"\n                                size=\"medium\"\n                                image={group.avatar}\n                                placeholder={group.placeholder}\n                                title={group.name}\n                            />\n                        </div>\n                        <div className=\"col-xs\">\n                            <h4 className=\"archive-item__title\">{group.name}{group.restrictedDomains ? \" (\"+group.restrictedDomains+\")\" : \"\"}</h4>\n                            <div className=\"archive-item__subtitle\">{group.about}</div>\n                        </div>\n                    </Link>\n                }\n            </div>\n        )\n    });\n\n      return (\n          <section className=\"main\">\n              <header className=\"toolbar row color--white\">\n                  <h3>Predefined Groups</h3>\n              </header>\n              <div className=\"flexrow\">\n                  <section className={archiveClassname}>\n                      <Scrollbar ref=\"archiveScroll\">\n                          <div className=\"archive-section__list row\">\n                              {\n                                  groups.length !== 0 ?\n                                      groupsList :\n                                      !isLoading\n                                      ? <div className=\"archive-section__list__item archive-section__list__item--empty col-xs-12\">\n                                          <h3>No predefined groups</h3>\n                                        </div>\n                                      : null\n                              }\n                              {\n                                  isLoading\n                                      ? <div className=\"archive-section__list__item archive-section__list__item--loading col-xs-12 col-sm-12 col-md-12 col-lg-12\">\n                                          <div className=\"preloader\"><div/><div/><div/><div/><div/></div>\n                                      </div>\n                                      : null\n                              }\n                          </div>\n                      </Scrollbar>\n                  </section>\n              </div>\n          </section>\n      );\n  }\n}\n\nexport default Container.create(Grouppre, { pure: false });\n"]}