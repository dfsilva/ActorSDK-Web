{"version":3,"sources":["../../../src/components/search/ToolbarSearch.react.js"],"names":["ToolbarSearch","getStores","calculateState","getState","props","handleSearchChange","bind","handlerSearchClear","handleSearchBlur","handleSearchFocus","onResultSelect","clear","blur","focus","query","handleSearch","index","results","state","length","goToMessagesSearch","contact","goToContact","renderSearchResultsDropdown","isFocused","render","toolbarSearchClassName","handleToolbarSearchClick","create"],"mappings":";;;;AAIA;;;;AACA;;AACA;;;;AACA;;AAEA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;+eAfA;;;;IAiBMA,a;;;gBACGC,S,wBAAY;AACjB,WAAO,uBAAP;AACD,G;;gBAEMC,c,6BAAiB;AACtB,WAAO,sBAAYC,QAAZ,EAAP;AACD,G;;AAED,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA,iDACjB,sBAAMA,KAAN,CADiB;;AAGjB,UAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBC,IAAxB,OAA1B;AACA,UAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBD,IAAxB,OAA1B;AACA,UAAKE,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBF,IAAtB,OAAxB;AACA,UAAKG,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBH,IAAvB,OAAzB;AACA,UAAKI,cAAL,GAAsB,MAAKA,cAAL,CAAoBJ,IAApB,OAAtB;AAPiB;AAQlB;;0BAEDC,kB,iCAAqB;AACnB,mCAAqBI,KAArB;AACD,G;;0BAEDH,gB,+BAAmB;AACjB,mCAAqBI,IAArB;AACD,G;;0BAEDH,iB,gCAAoB;AAClB,mCAAqBI,KAArB;AACD,G;;0BAEDR,kB,+BAAmBS,K,EAAO;AACxB,mCAAqBC,YAArB,CAAkCD,KAAlC;AACD,G;;0BAEDJ,c,2BAAeM,K,EAAO;AAAA,QACZC,OADY,GACA,KAAKC,KADL,CACZD,OADY;;AAEpB,QAAID,UAAUC,QAAQE,MAAtB,EAA8B;AAC5B,qCAAqBC,kBAArB,CAAwC,KAAKF,KAAL,CAAWJ,KAAnD;AACD,KAFD,MAEO;AACL,UAAMO,UAAUJ,QAAQD,KAAR,CAAhB;AACA,qCAAqBM,WAArB,CAAiCD,OAAjC;AACD;AACF,G;;0BAEDE,2B,0CAA8B;AAAA,iBACU,KAAKL,KADf;AAAA,QACpBM,SADoB,UACpBA,SADoB;AAAA,QACTV,KADS,UACTA,KADS;AAAA,QACFG,OADE,UACFA,OADE;;;AAG5B,QAAI,CAACO,SAAL,EAAgB;AACd,aAAO,IAAP;AACD;;AAED,QAAI,CAACV,MAAMK,MAAX,EAAmB;AACjB,aACE;AAAA;AAAA,UAAK,WAAU,2BAAf;AACE;AAAA;AAAA,YAAK,WAAU,MAAf;AACE,2EAAsB,IAAG,aAAzB;AADF;AADF,OADF;AAOD;;AAED,WACE;AAAA;AAAA,QAAY,WAAU,2BAAtB,EAAkD,KAAKF,QAAQE,MAA/D,EAAuE,UAAU,KAAKT,cAAtF;AACE,sEAAsB,OAAOI,KAA7B,EAAmC,SAASG,OAA5C,GADF;AAEE;AAAA;AAAA,UAAgB,OAAOA,QAAQE,MAA/B;AACE;AAAA;AAAA,YAAQ,WAAU,yBAAlB;AACE,uEAAkB,IAAG,iBAArB,GADF;AAAA;AAC2C;AAAA;AAAA,cAAG,WAAU,gBAAb;AAAA;AAAA;AAD3C;AADF;AAFF,KADF;AAUD,G;;0BAEDM,M,qBAAS;AAAA,kBACsB,KAAKP,KAD3B;AAAA,QACCJ,KADD,WACCA,KADD;AAAA,QACQU,SADR,WACQA,SADR;;AAEP,QAAME,yBAAyB,0BAAW,qBAAX,EAAkC;AAC/D,kCAA4BF;AADmC,KAAlC,CAA/B;;AAIA,WACE;AAAA;AAAA,QAAK,WAAWE,sBAAhB,EAAwC,SAAS,KAAKC,wBAAtD;AACE;AAAA;AAAA,UAAK,WAAU,KAAf;AACE;AAAA;AAAA,YAAG,WAAU,4BAAb;AAAA;AAAA,SADF;AAEE;AACE,iBAAOb,KADT;AAEE,qBAAWU,SAFb;AAGE,kBAAQ,KAAKhB,gBAHf;AAIE,mBAAS,KAAKC,iBAJhB;AAKE,mBAAS,KAAKF,kBALhB;AAME,oBAAU,KAAKF;AANjB;AAFF,OADF;AAYG,WAAKkB,2BAAL;AAZH,KADF;AAgBD,G;;;;;kBAGY,iBAAUK,MAAV,CAAiB5B,aAAjB,C","file":"ToolbarSearch.react.js","sourcesContent":["/*\r\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport { Container } from 'flux/utils';\r\nimport classnames from 'classnames';\r\nimport { FormattedMessage, FormattedHTMLMessage } from 'react-intl';\r\n\r\nimport SearchStore from '../../stores/SearchStore';\r\nimport SearchActionCreators from '../../actions/SearchActionCreators';\r\n\r\nimport SearchInput from './SearchInput.react';\r\nimport SelectList from '../common/SelectList.react';\r\nimport SelectListItem from '../common/SelectListItem.react';\r\nimport ToolbarSearchResults from './ToolbarSearchResults.react';\r\n\r\nclass ToolbarSearch extends Component {\r\n  static getStores() {\r\n    return [SearchStore];\r\n  }\r\n\r\n  static calculateState() {\r\n    return SearchStore.getState();\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleSearchChange = this.handleSearchChange.bind(this);\r\n    this.handlerSearchClear = this.handlerSearchClear.bind(this);\r\n    this.handleSearchBlur = this.handleSearchBlur.bind(this);\r\n    this.handleSearchFocus = this.handleSearchFocus.bind(this);\r\n    this.onResultSelect = this.onResultSelect.bind(this);\r\n  }\r\n\r\n  handlerSearchClear() {\r\n    SearchActionCreators.clear();\r\n  }\r\n\r\n  handleSearchBlur() {\r\n    SearchActionCreators.blur();\r\n  }\r\n\r\n  handleSearchFocus() {\r\n    SearchActionCreators.focus();\r\n  }\r\n\r\n  handleSearchChange(query) {\r\n    SearchActionCreators.handleSearch(query);\r\n  }\r\n\r\n  onResultSelect(index) {\r\n    const { results } = this.state;\r\n    if (index === results.length) {\r\n      SearchActionCreators.goToMessagesSearch(this.state.query);\r\n    } else {\r\n      const contact = results[index];\r\n      SearchActionCreators.goToContact(contact);\r\n    }\r\n  }\r\n\r\n  renderSearchResultsDropdown() {\r\n    const { isFocused, query, results } = this.state;\r\n\r\n    if (!isFocused) {\r\n      return null\r\n    }\r\n\r\n    if (!query.length) {\r\n      return (\r\n        <div className=\"toolbar__search__dropdown\">\r\n          <div className=\"hint\">\r\n            <FormattedHTMLMessage id=\"search.hint\"/>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <SelectList className=\"toolbar__search__dropdown\" max={results.length} onSelect={this.onResultSelect}>\r\n        <ToolbarSearchResults query={query}results={results} />\r\n        <SelectListItem index={results.length}>\r\n          <footer className=\"toolbar__search__footer\">\r\n            <FormattedMessage id=\"search.inDialog\"/> <i className=\"material-icons\">arrow_forward</i>\r\n          </footer>\r\n        </SelectListItem>\r\n      </SelectList>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { query, isFocused } = this.state;\r\n    const toolbarSearchClassName = classnames('toolbar__search row', {\r\n      'toolbar__search--focused': isFocused\r\n    });\r\n\r\n    return (\r\n      <div className={toolbarSearchClassName} onClick={this.handleToolbarSearchClick}>\r\n        <div className=\"row\">\r\n          <i className=\"search-icon material-icons\">search</i>\r\n          <SearchInput\r\n            value={query}\r\n            isFocused={isFocused}\r\n            onBlur={this.handleSearchBlur}\r\n            onFocus={this.handleSearchFocus}\r\n            onClear={this.handlerSearchClear}\r\n            onChange={this.handleSearchChange}\r\n          />\r\n        </div>\r\n        {this.renderSearchResultsDropdown()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Container.create(ToolbarSearch);\r\n"]}