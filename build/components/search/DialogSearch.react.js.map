{"version":3,"sources":["../../../src/components/search/DialogSearch.react.js"],"names":["DialogSearch","props","handleCancel","bind","handleKeyDown","handleQueryChange","shouldComponentUpdate","nextProps","isOpen","query","componentDidUpdate","prevProps","setCaretToEnd","onCancel","event","keyCode","ESC","preventDefault","onChange","target","value","renderContent","render","focus","input","refs","selectionStart","selectionEnd","length","propTypes","bool","isRequired","string","func"],"mappings":";;;;AAIA;;;;AACA;;;;;;;;+eALA;;;;IAOMA,Y;;;AAQJ,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA,iDACjB,sBAAMA,KAAN,CADiB;;AAGjB,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,OAApB;AACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBD,IAAnB,OAArB;AACA,UAAKE,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBF,IAAvB,OAAzB;AALiB;AAMlB;;yBAEDG,qB,kCAAsBC,S,EAAW;AAC/B,WAAOA,UAAUC,MAAV,KAAqB,KAAKP,KAAL,CAAWO,MAAhC,IACAD,UAAUE,KAAV,KAAoB,KAAKR,KAAL,CAAWQ,KADtC;AAED,G;;yBAEDC,kB,+BAAmBC,S,EAAW;AAC5B,QAAI,KAAKV,KAAL,CAAWO,MAAX,IAAqB,CAACG,UAAUH,MAApC,EAA4C;AAC1C,WAAKI,aAAL;AACD;AACF,G;;yBAEDV,Y,2BAAe;AACb,SAAKD,KAAL,CAAWY,QAAX;AACD,G;;yBAEDT,a,0BAAcU,K,EAAO;AACnB,QAAIA,MAAMC,OAAN,KAAkB,4BAASC,GAA/B,EAAoC;AAClCF,YAAMG,cAAN;AACA,WAAKf,YAAL;AACD;AACF,G;;yBAEDG,iB,8BAAkBS,K,EAAO;AACvB,SAAKb,KAAL,CAAWiB,QAAX,CAAoBJ,MAAMK,MAAN,CAAaC,KAAjC;AACD,G;;yBAEDC,a,4BAAgB;AAAA,QACNZ,KADM,GACI,KAAKR,KADT,CACNQ,KADM;;;AAGd,WACE;AAAA;AAAA,QAAK,WAAU,oBAAf;AACE;AACE,mBAAU,uBADZ;AAEE,cAAK,QAFP;AAGE,aAAI,OAHN;AAIE,qBAAY,gCAJd;AAKE,eAAOA,KALT;AAME,kBAAU,KAAKJ,iBANjB;AAOE,mBAAW,KAAKD;AAPlB,QADF;AAUE;AAAA;AAAA,UAAK,WAAU,0BAAf;AACE;AAAA;AAAA,YAAG,WAAU,wCAAb,EAAsD,SAAS,KAAKF,YAApE;AAAA;AAAA;AADF;AAVF,KADF;AAkBD,G;;yBAEDoB,M,qBAAS;AAAA,QACCd,MADD,GACY,KAAKP,KADjB,CACCO,MADD;;;AAGP,WACE;AAAA;AAAA,QAAK,WAAU,2BAAf;AACGA,eAAS,KAAKa,aAAL,EAAT,GAAgC;AADnC,KADF;AAKD,G;;yBAEDE,K,oBAAQ;AAAA,QACEC,KADF,GACY,KAAKC,IADjB,CACED,KADF;;AAEN,QAAIA,KAAJ,EAAW;AACTA,YAAMD,KAAN;AACD;AACF,G;;yBAEDX,a,4BAAgB;AAAA,QACNY,KADM,GACI,KAAKC,IADT,CACND,KADM;;AAEd,QAAIA,KAAJ,EAAW;AACTA,YAAMD,KAAN;AACAC,YAAME,cAAN,GAAuBF,MAAMG,YAAN,GAAqBH,MAAMJ,KAAN,CAAYQ,MAAxD;AACD;AACF,G;;;;;AAxFG5B,Y,CACG6B,S,GAAY;AACjBrB,UAAQ,iBAAUsB,IAAV,CAAeC,UADN;AAEjBtB,SAAO,iBAAUuB,MAAV,CAAiBD,UAFP;AAGjBlB,YAAU,iBAAUoB,IAAV,CAAeF,UAHR;AAIjBb,YAAU,iBAAUe,IAAV,CAAeF;AAJR,C;kBA0FN/B,Y","file":"DialogSearch.react.js","sourcesContent":["/*\r\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport React, { Component, PropTypes } from 'react';\r\nimport { KeyCodes } from '../../constants/ActorAppConstants';\r\n\r\nclass DialogSearch extends Component {\r\n  static propTypes = {\r\n    isOpen: PropTypes.bool.isRequired,\r\n    query: PropTypes.string.isRequired,\r\n    onCancel: PropTypes.func.isRequired,\r\n    onChange: PropTypes.func.isRequired\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n    this.handleKeyDown = this.handleKeyDown.bind(this);\r\n    this.handleQueryChange = this.handleQueryChange.bind(this);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    return nextProps.isOpen !== this.props.isOpen ||\r\n           nextProps.query !== this.props.query;\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.isOpen && !prevProps.isOpen) {\r\n      this.setCaretToEnd();\r\n    }\r\n  }\r\n\r\n  handleCancel() {\r\n    this.props.onCancel();\r\n  }\r\n\r\n  handleKeyDown(event) {\r\n    if (event.keyCode === KeyCodes.ESC) {\r\n      event.preventDefault();\r\n      this.handleCancel();\r\n    }\r\n  }\r\n\r\n  handleQueryChange(event) {\r\n    this.props.onChange(event.target.value);\r\n  }\r\n\r\n  renderContent() {\r\n    const { query } = this.props;\r\n\r\n    return (\r\n      <div className=\"dialog__search row\">\r\n        <input\r\n          className=\"dialog__search__input\"\r\n          type=\"search\"\r\n          ref=\"input\"\r\n          placeholder=\"Search messages in this dialog\"\r\n          value={query}\r\n          onChange={this.handleQueryChange}\r\n          onKeyDown={this.handleKeyDown}\r\n        />\r\n        <div className=\"dialog__search__controls\">\r\n          <a className=\"dialog__search__cancel link link--blue\" onClick={this.handleCancel}>\r\n            Cancel\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { isOpen } = this.props;\r\n\r\n    return (\r\n      <div className=\"dialog__search__container\">\r\n        {isOpen ? this.renderContent() : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  focus() {\r\n    const { input } = this.refs;\r\n    if (input) {\r\n      input.focus();\r\n    }\r\n  }\r\n\r\n  setCaretToEnd() {\r\n    const { input } = this.refs;\r\n    if (input) {\r\n      input.focus();\r\n      input.selectionStart = input.selectionEnd = input.value.length;\r\n    }\r\n  }\r\n}\r\n\r\nexport default DialogSearch;\r\n"]}