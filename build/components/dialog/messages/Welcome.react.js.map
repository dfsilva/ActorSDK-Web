{"version":3,"sources":["../../../../src/components/dialog/messages/Welcome.react.js"],"names":["Welcome","props","context","onInviteClick","bind","shouldComponentUpdate","peer","group","getGroup","id","show","renderWelcomeAvatar","renderUserText","user","getUser","isBot","avatar","placeholder","name","marginTop","about","renderGroupText","intl","myID","getMyId","admin","ownerId","creator","messages","renderText","type","USER","GROUP","render","propTypes","object","isRequired","contextTypes"],"mappings":"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","file":"Welcome.react.js","sourcesContent":["/*\r\n * Copyright (C) 2015-2016 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport React, { Component, PropTypes } from 'react';\r\nimport { FormattedHTMLMessage } from 'react-intl'\r\nimport { shouldComponentUpdate } from 'react-addons-pure-render-mixin';\r\n\r\nimport SvgIcon from '../../common/SvgIcon.react';\r\n\r\nimport { PeerTypes } from '../../../constants/ActorAppConstants';\r\n\r\nimport InviteUserActions from '../../../actions/InviteUserActions';\r\n\r\nimport UserStore from '../../../stores/UserStore';\r\nimport GroupStore from '../../../stores/GroupStore';\r\n\r\nimport AvatarItem from './../../common/AvatarItem.react';\r\n\r\nclass Welcome extends Component {\r\n  static propTypes = {\r\n    peer: PropTypes.object.isRequired\r\n  };\r\n\r\n  static contextTypes = {\r\n    intl: PropTypes.object\r\n  };\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.onInviteClick = this.onInviteClick.bind(this);\r\n    this.shouldComponentUpdate = shouldComponentUpdate.bind(this);\r\n  }\r\n\r\n  onInviteClick() {\r\n    const { peer } = this.props;\r\n    const group = GroupStore.getGroup(peer.id);\r\n    InviteUserActions.show(group);\r\n  }\r\n\r\n  renderWelcomeAvatar() {\r\n    return (\r\n      <div className=\"message__info\">\r\n        <div className=\"welcome-avatar\">\r\n          <SvgIcon className=\"icon icon--gray\" glyph=\"star\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderUserText(id) {\r\n    const user = UserStore.getUser(id);\r\n\r\n    if (user.isBot) {\r\n      return (\r\n        <div className=\"row\">\r\n          <div className=\"message__info\">\r\n            <AvatarItem\r\n              image={user.avatar}\r\n              className=\"message__avatar\"\r\n              placeholder={user.placeholder}\r\n              size=\"normal\"\r\n              title={user.name}\r\n            />\r\n          </div>\r\n          <div className=\"message__body col-xs\">\r\n            <FormattedHTMLMessage id=\"message.welcome.private\" values={{ name: user.name }}/>\r\n            <p style={{ marginTop: 16 }}>{user.about}</p>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    return (\r\n      <div className=\"row\">\r\n        {this.renderWelcomeAvatar()}\r\n        <div className=\"message__body col-xs\">\r\n          <FormattedHTMLMessage id=\"message.welcome.private\" values={{ name: user.name }}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderGroupText(id) {\r\n    const { intl } = this.context;\r\n    const group = GroupStore.getGroup(id);\r\n    const myID = UserStore.getMyId();\r\n    const admin = UserStore.getUser(group.ownerId);\r\n    const creator = group.ownerId === myID ? intl.messages['message.welcome.group.you'] : (admin ? admin.name : \"\");\r\n\r\n    return (\r\n      <div className=\"row\">\r\n        {this.renderWelcomeAvatar()}\r\n        <div className=\"message__body col-xs\">\r\n          <FormattedHTMLMessage id=\"message.welcome.group.main\" values={{ name: group.name, creator }}/>\r\n          <p>\r\n            {intl.messages['message.welcome.group.actions.start']}\r\n            <a onClick={this.onInviteClick}>{intl.messages['message.welcome.group.actions.invite']}</a>\r\n            {intl.messages['message.welcome.group.actions.end']}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderText() {\r\n    const { peer } = this.props;\r\n\r\n    switch (peer.type) {\r\n      case PeerTypes.USER:\r\n        return this.renderUserText(peer.id);\r\n      case PeerTypes.GROUP:\r\n        return this.renderGroupText(peer.id);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div className=\"message message--welcome\">\r\n        {this.renderText()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Welcome;\r\n"]}