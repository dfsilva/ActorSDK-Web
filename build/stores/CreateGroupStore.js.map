{"version":3,"sources":["../../src/stores/CreateGroupStore.js"],"names":["CreateGroupStore","getInitialState","step","NAME_INPUT","name","selectedUserIds","Set","reduce","state","action","type","GROUP_CREATE_SET_NAME","CONTACTS_SELECTION","GROUP_CREATE_SET_MEMBERS","GROUP_CREATE","CREATION_STARTED","GROUP_CREATE_SUCCESS","GROUP_CREATE_ERROR","console","error","GROUP_CREATE_MODAL_HIDE","getCurrentStep","getState","getGroupName","getSelectedUserIds"],"mappings":";;;;;;AAIA;;;;AAEA;;AACA;;;;AACA;;;;;;;;+eARA;;;;IAUMA,gB;;;;;;;;;6BACJC,e,8BAAkB;AAChB,WAAO;AACLC,YAAM,oCAAiBC,UADlB;AAELC,YAAM,IAFD;AAGLC,uBAAiB,IAAI,oBAAUC,GAAd;AAHZ,KAAP;AAKD,G;;6BAEDC,M,mBAAOC,K,EAAOC,M,EAAQ;AACpB,YAAQA,OAAOC,IAAf;AACE,WAAK,+BAAYC,qBAAjB;AACE,4BACKH,KADL;AAEEN,gBAAM,oCAAiBU,kBAFzB;AAGER,gBAAMK,OAAOL;AAHf;;AAMF,WAAK,+BAAYS,wBAAjB;AACE,4BACKL,KADL;AAEEH,2BAAiBI,OAAOJ;AAF1B;;AAKF,WAAK,+BAAYS,YAAjB;AACE,4BACKN,KADL;AAEEN,gBAAM,oCAAiBa;;AAG3B;AALE,WAMF,KAAK,+BAAYC,oBAAjB;AACE,eAAO,KAAKf,eAAL,EAAP;;AAEF,WAAK,+BAAYgB,kBAAjB;AACEC,gBAAQC,KAAR,CAAc,wBAAd,EAAwCV,OAAOU,KAA/C;AACA,eAAOX,KAAP;;AAEF,WAAK,+BAAYY,uBAAjB;AACE,eAAO,KAAKnB,eAAL,EAAP;;AAGF;AACE,eAAOO,KAAP;AAjCJ;AAmCD,G;;6BAGCa,c,6BAAiB;AACf,WAAO,KAAKC,QAAL,GAAgBpB,IAAvB;AACD,G;;6BAEDqB,Y,2BAAe;AACb,WAAO,KAAKD,QAAL,GAAgBlB,IAAvB;AACD,G;;6BAEDoB,kB,iCAAqB;AACnB,WAAO,KAAKF,QAAL,GAAgBjB,eAAvB;AACD,G;;;;;kBAGU,IAAIL,gBAAJ,8B","file":"CreateGroupStore.js","sourcesContent":["/*\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\n */\n\nimport Immutable from 'immutable';\n\nimport { ReduceStore } from 'flux/utils';\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\nimport { ActionTypes, CreateGroupSteps } from '../constants/ActorAppConstants';\n\nclass CreateGroupStore extends ReduceStore {\n  getInitialState() {\n    return {\n      step: CreateGroupSteps.NAME_INPUT,\n      name: null,\n      selectedUserIds: new Immutable.Set()\n    };\n  }\n\n  reduce(state, action) {\n    switch (action.type) {\n      case ActionTypes.GROUP_CREATE_SET_NAME:\n        return {\n          ...state,\n          step: CreateGroupSteps.CONTACTS_SELECTION,\n          name: action.name\n        }\n\n      case ActionTypes.GROUP_CREATE_SET_MEMBERS:\n        return {\n          ...state,\n          selectedUserIds: action.selectedUserIds\n        }\n\n      case ActionTypes.GROUP_CREATE:\n        return {\n          ...state,\n          step: CreateGroupSteps.CREATION_STARTED\n        }\n\n      // TODO: Show create group error success messages in modal\n      case ActionTypes.GROUP_CREATE_SUCCESS:\n        return this.getInitialState();\n\n      case ActionTypes.GROUP_CREATE_ERROR:\n        console.error('Failed to create group', action.error);\n        return state;\n\n      case ActionTypes.GROUP_CREATE_MODAL_HIDE:\n        return this.getInitialState();\n\n\n      default:\n        return state;\n    }\n  }\n\n\n    getCurrentStep() {\n      return this.getState().step;\n    }\n\n    getGroupName() {\n      return this.getState().name;\n    }\n\n    getSelectedUserIds() {\n      return this.getState().selectedUserIds;\n    }\n}\n\nexport default new CreateGroupStore(Dispatcher);\n"]}