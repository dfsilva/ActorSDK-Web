{"version":3,"sources":["../../src/stores/InviteUserStore.js"],"names":["InviteUserStore","getInitialState","query","group","inviteUrl","users","reduce","state","action","type","DIALOG_INFO_CHANGED","info","INVITE_USER_MODAL_SHOW","INVITE_USER_MODAL_HIDE","INVITE_USER_BY_LINK_MODAL_SHOW","url","INVITE_USER","uid","PROCESSING","INVITE_USER_SUCCESS","SUCCESS","INVITE_USER_ERROR","FAILURE","INVITE_USER_RESET","getGroup","getState","getInviteUrl","getInviteUserState"],"mappings":";;;;;;AAIA;;AACA;;;;AACA;;;;;;;;+eANA;;;;IAQMA,e;;;;;;;;;4BACJC,e,8BAAkB;AAChB,WAAO;AACLC,aAAO,IADF;AAELC,aAAO,IAFF;AAGLC,iBAAW,IAHN;AAILC,aAAO;AAJF,KAAP;AAMD,G;;4BAEDC,M,mBAAOC,K,EAAOC,M,EAAQ;AACpB,YAAOA,OAAOC,IAAd;AACE,WAAK,+BAAYC,mBAAjB;AACE,4BACKH,KADL;AAEEJ,iBAAOK,OAAOG;AAFhB;;AAKF,WAAK,+BAAYC,sBAAjB;AACE,4BACKL,KADL;AAEEJ,iBAAOK,OAAOL;AAFhB;AAIF,WAAK,+BAAYU,sBAAjB;AACE,eAAO,KAAKZ,eAAL,EAAP;;AAEF,WAAK,+BAAYa,8BAAjB;AACE,4BACKP,KADL;AAEEJ,iBAAOK,OAAOL,KAFhB;AAGEC,qBAAWI,OAAOO;AAHpB;;AAMF;AACA,WAAK,+BAAYC,WAAjB;AACET,cAAMF,KAAN,CAAYG,OAAOS,GAAnB,IAA0B,qCAAkBC,UAA5C;AACA,4BACKX,KADL;AAGF,WAAK,+BAAYY,mBAAjB;AACEZ,cAAMF,KAAN,CAAYG,OAAOS,GAAnB,IAA0B,qCAAkBG,OAA5C;AACA,4BACKb,KADL;AAGF,WAAK,+BAAYc,iBAAjB;AACEd,cAAMF,KAAN,CAAYG,OAAOS,GAAnB,IAA0B,qCAAkBK,OAA5C;AACA,4BACKf,KADL;AAGF,WAAK,+BAAYgB,iBAAjB;AACE,eAAOhB,MAAMF,KAAN,CAAYG,OAAOS,GAAnB,CAAP;AACA,4BACKV,KADL;AAGF;AACE,eAAOA,KAAP;AA5CJ;AA8CD,G;;4BAEDiB,Q,uBAAW;AACT,WAAO,KAAKC,QAAL,GAAgBtB,KAAvB;AACD,G;;4BAEDuB,Y,2BAAe;AACb,WAAO,KAAKD,QAAL,GAAgBrB,SAAvB;AACD,G;;4BAEDuB,kB,iCAAqB;AACnB,WAAO,KAAKF,QAAL,GAAgBpB,KAAvB;AACD,G;;;;;kBAGY,IAAIL,eAAJ,8B","file":"InviteUserStore.js","sourcesContent":["/*\r\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport { ReduceStore } from 'flux/utils';\r\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\r\nimport { ActionTypes, AsyncActionStates } from '../constants/ActorAppConstants';\r\n\r\nclass InviteUserStore extends ReduceStore {\r\n  getInitialState() {\r\n    return {\r\n      query: null,\r\n      group: null,\r\n      inviteUrl: null,\r\n      users: {}\r\n    };\r\n  }\r\n\r\n  reduce(state, action) {\r\n    switch(action.type) {\r\n      case ActionTypes.DIALOG_INFO_CHANGED:\r\n        return {\r\n          ...state,\r\n          group: action.info\r\n        };\r\n\r\n      case ActionTypes.INVITE_USER_MODAL_SHOW:\r\n        return {\r\n          ...state,\r\n          group: action.group\r\n        };\r\n      case ActionTypes.INVITE_USER_MODAL_HIDE:\r\n        return this.getInitialState();\r\n\r\n      case ActionTypes.INVITE_USER_BY_LINK_MODAL_SHOW:\r\n        return {\r\n          ...state,\r\n          group: action.group,\r\n          inviteUrl: action.url\r\n        };\r\n\r\n      // Invite user\r\n      case ActionTypes.INVITE_USER:\r\n        state.users[action.uid] = AsyncActionStates.PROCESSING;\r\n        return {\r\n          ...state\r\n        };\r\n      case ActionTypes.INVITE_USER_SUCCESS:\r\n        state.users[action.uid] = AsyncActionStates.SUCCESS;\r\n        return {\r\n          ...state\r\n        };\r\n      case ActionTypes.INVITE_USER_ERROR:\r\n        state.users[action.uid] = AsyncActionStates.FAILURE;\r\n        return {\r\n          ...state\r\n        };\r\n      case ActionTypes.INVITE_USER_RESET:\r\n        delete state.users[action.uid];\r\n        return {\r\n          ...state\r\n        };\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n\r\n  getGroup() {\r\n    return this.getState().group;\r\n  }\r\n\r\n  getInviteUrl() {\r\n    return this.getState().inviteUrl;\r\n  }\r\n\r\n  getInviteUserState() {\r\n    return this.getState().users;\r\n  }\r\n}\r\n\r\nexport default new InviteUserStore(Dispatcher);\r\n"]}