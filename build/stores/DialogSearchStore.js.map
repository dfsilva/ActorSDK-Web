{"version":3,"sources":["../../src/stores/DialogSearchStore.js"],"names":["DialogSearchStore","getInitialState","isOpen","query","filter","text","docs","links","photos","result","status","SUCCESS","reduce","state","action","type","DIALOG_SEARCH_SHOW","BIND_DIALOG_PEER","DIALOG_SEARCH_HIDE","DIALOG_SEARCH_CHANGE_QUERY","DIALOG_SEARCH_TEXT_SUCCESS","set","response","DIALOG_SEARCH_DOCS_SUCCESS","DIALOG_SEARCH_LINKS_SUCCESS","DIALOG_SEARCH_PHOTO_SUCCESS"],"mappings":";;;;;;AAIA;;AACA;;AACA;;;;AACA;;;;;;;;+eAPA;;;;IASMA,iB;;;;;;;;;8BACJC,e,8BAAkB;AAChB,WAAO;AACLC,cAAQ,KADH;AAELC,aAAO,EAFF;AAGLC,cAAQ,mBAAQ;AACdC,cAAM,IADQ;AAEdC,cAAM,IAFQ;AAGdC,eAAO,IAHO;AAIdC,gBAAQ;AAJM,OAAR,CAHH;AASLC,cAAQ,mBAAQ;AACdJ,cAAM,EADQ;AAEdC,cAAM,EAFQ;AAGdC,eAAO,EAHO;AAIdC,gBAAQ;AAJM,OAAR,CATH;AAeLE,cAAQ,mBAAQ;AACdL,cAAM,qCAAkBM,OADV;AAEdL,cAAM,qCAAkBK,OAFV;AAGdJ,eAAO,qCAAkBI,OAHX;AAIdH,gBAAQ,qCAAkBG;AAJZ,OAAR;AAfH,KAAP;AAsBD,G;;8BAEDC,M,mBAAOC,K,EAAOC,M,EAAQ;AACpB,YAAQA,OAAOC,IAAf;AACE,WAAK,+BAAYC,kBAAjB;AACE,4BACKH,KADL;AAEEX,kBAAQ;AAFV;;AAKF,WAAK,+BAAYe,gBAAjB;AACA,WAAK,+BAAYC,kBAAjB;AACE,eAAO,KAAKjB,eAAL,EAAP;;AAEF,WAAK,+BAAYkB,0BAAjB;AACE,4BACKN,KADL;AAEEV,iBAAOW,OAAOX;AAFhB;;AAKF,WAAK,+BAAYiB,0BAAjB;AACE,4BACKP,KADL;AAEEJ,kBAAQI,MAAMJ,MAAN,CAAaY,GAAb,CAAiB,MAAjB,EAAyBP,OAAOQ,QAAhC,CAFV;AAGEZ,kBAAQG,MAAMJ,MAAN,CAAaY,GAAb,CAAiB,MAAjB,EAAyB,qCAAkBV,OAA3C;AAHV;;AAMF,WAAK,+BAAYY,0BAAjB;AACE,4BACKV,KADL;AAEEJ,kBAAQI,MAAMJ,MAAN,CAAaY,GAAb,CAAiB,MAAjB,EAAyBP,OAAOQ,QAAhC;AAFV;;AAKF,WAAK,+BAAYE,2BAAjB;AACE,4BACKX,KADL;AAEEJ,kBAAQI,MAAMJ,MAAN,CAAaY,GAAb,CAAiB,OAAjB,EAA0BP,OAAOQ,QAAjC;AAFV;;AAKF,WAAK,+BAAYG,2BAAjB;AACE,4BACKZ,KADL;AAEEJ,kBAAQI,MAAMJ,MAAN,CAAaY,GAAb,CAAiB,QAAjB,EAA2BP,OAAOQ,QAAlC;AAFV;;AAKF;AACE,eAAOT,KAAP;AA3CJ;AA6CD,G;;;;;kBAGY,IAAIb,iBAAJ,8B","file":"DialogSearchStore.js","sourcesContent":["/*\r\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\r\n */\r\n\r\nimport { ReduceStore } from 'flux/utils';\r\nimport { Map } from 'immutable';\r\nimport Dispatcher from '../dispatcher/ActorAppDispatcher';\r\nimport { ActionTypes, AsyncActionStates } from '../constants/ActorAppConstants';\r\n\r\nclass DialogSearchStore extends ReduceStore {\r\n  getInitialState() {\r\n    return {\r\n      isOpen: false,\r\n      query: '',\r\n      filter: new Map({\r\n        text: true,\r\n        docs: true,\r\n        links: true,\r\n        photos: true\r\n      }),\r\n      result: new Map({\r\n        text: [],\r\n        docs: [],\r\n        links: [],\r\n        photos: []\r\n      }),\r\n      status: new Map({\r\n        text: AsyncActionStates.SUCCESS,\r\n        docs: AsyncActionStates.SUCCESS,\r\n        links: AsyncActionStates.SUCCESS,\r\n        photos: AsyncActionStates.SUCCESS\r\n      })\r\n    };\r\n  }\r\n\r\n  reduce(state, action) {\r\n    switch (action.type) {\r\n      case ActionTypes.DIALOG_SEARCH_SHOW:\r\n        return {\r\n          ...state,\r\n          isOpen: true\r\n        };\r\n\r\n      case ActionTypes.BIND_DIALOG_PEER:\r\n      case ActionTypes.DIALOG_SEARCH_HIDE:\r\n        return this.getInitialState();\r\n\r\n      case ActionTypes.DIALOG_SEARCH_CHANGE_QUERY:\r\n        return {\r\n          ...state,\r\n          query: action.query\r\n        }\r\n\r\n      case ActionTypes.DIALOG_SEARCH_TEXT_SUCCESS:\r\n        return {\r\n          ...state,\r\n          result: state.result.set('text', action.response),\r\n          status: state.result.set('text', AsyncActionStates.SUCCESS)\r\n        };\r\n\r\n      case ActionTypes.DIALOG_SEARCH_DOCS_SUCCESS:\r\n        return {\r\n          ...state,\r\n          result: state.result.set('docs', action.response)\r\n        };\r\n\r\n      case ActionTypes.DIALOG_SEARCH_LINKS_SUCCESS:\r\n        return {\r\n          ...state,\r\n          result: state.result.set('links', action.response)\r\n        };\r\n\r\n      case ActionTypes.DIALOG_SEARCH_PHOTO_SUCCESS:\r\n        return {\r\n          ...state,\r\n          result: state.result.set('photos', action.response)\r\n        };\r\n\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n}\r\n\r\nexport default new DialogSearchStore(Dispatcher);\r\n"]}