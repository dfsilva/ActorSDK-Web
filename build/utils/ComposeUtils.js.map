{"version":3,"sources":["../../src/utils/ComposeUtils.js"],"names":["parseBotCommand","parseMentionQuery","text","matches","exec","name","args","_parseMentionQuery","runText","query","position","length","lastChar","charAt","charBeforeAt","trim","atStart","substring"],"mappings":";;;QAIgBA,e,GAAAA,e;QAsCAC,iB,GAAAA,iB;AA1ChB;;;;AAIO,SAASD,eAAT,CAAyBE,IAAzB,EAA+B;AACpC,MAAMC,UAAU,oBAAoBC,IAApB,CAAyBF,IAAzB,CAAhB;AACA,MAAI,CAACC,OAAL,EAAc;AACZ,WAAO,IAAP;AACD;;AAED,SAAO;AACLE,UAAMF,QAAQ,CAAR,CADD;AAELG,UAAMH,QAAQ,CAAR;AAFD,GAAP;AAID;;AAED,SAASI,kBAAT,CAA4BC,OAA5B,EAAqCC,KAArC,EAA4CC,QAA5C,EAAsD;AACpD,MAAIF,QAAQG,MAAR,KAAmB,CAAvB,EAA0B;AACxB,WAAO,IAAP;AACD,GAFD,MAEO;AACL,QAAMC,WAAWJ,QAAQK,MAAR,CAAeL,QAAQG,MAAR,GAAiB,CAAhC,CAAjB;AACA,QAAIC,aAAa,GAAjB,EAAsB;AACpB,UAAME,eAAeN,QAAQK,MAAR,CAAeL,QAAQG,MAAR,GAAiB,CAAhC,CAArB;AACA,UAAIG,aAAaC,IAAb,OAAwB,EAA5B,EAAgC;AAC9B,YAAMb,OAAQO,SAAS,EAAvB;AACA,YAAMO,UAAUd,KAAKS,MAAL,GAAc,CAAd,KAAoBD,QAApC;;AAEA,eAAO;AACLR,gBAAMA,IADD;AAELc,mBAASA;AAFJ,SAAP;AAID,OARD,MAQO;AACL,eAAO,IAAP;AACD;AACF,KAbD,MAaO,IAAIJ,SAASG,IAAT,OAAoB,EAAxB,EAA4B;AACjC,aAAO,IAAP;AACD,KAFM,MAEA;AACL,aAAOR,mBAAmBC,QAAQS,SAAR,CAAkB,CAAlB,EAAqBT,QAAQG,MAAR,GAAiB,CAAtC,CAAnB,EAA6DC,YAAYH,SAAS,EAArB,CAA7D,EAAuFC,QAAvF,CAAP;AACD;AACF;AACF;;AAEM,SAAST,iBAAT,CAA2BC,IAA3B,EAAiCQ,QAAjC,EAA2C;AAChD,SAAOH,mBAAmBL,KAAKe,SAAL,CAAe,CAAf,EAAkBP,QAAlB,CAAnB,EAAgD,IAAhD,EAAsDA,QAAtD,CAAP;AACD","file":"ComposeUtils.js","sourcesContent":["/*\r\n * Copyright (C) 2015 Actor LLC. <https://actor.im>\r\n */\r\n\r\nexport function parseBotCommand(text) {\r\n  const matches = /^\\/(.)?(?: (.+))?/.exec(text);\r\n  if (!matches) {\r\n    return null;\r\n  }\r\n\r\n  return {\r\n    name: matches[1],\r\n    args: matches[2]\r\n  };\r\n}\r\n\r\nfunction _parseMentionQuery(runText, query, position) {\r\n  if (runText.length === 0) {\r\n    return null;\r\n  } else {\r\n    const lastChar = runText.charAt(runText.length - 1);\r\n    if (lastChar === '@') {\r\n      const charBeforeAt = runText.charAt(runText.length - 2);\r\n      if (charBeforeAt.trim() === '') {\r\n        const text = (query || '');\r\n        const atStart = text.length + 1 === position;\r\n\r\n        return {\r\n          text: text,\r\n          atStart: atStart\r\n        };\r\n      } else {\r\n        return null;\r\n      }\r\n    } else if (lastChar.trim() === '') {\r\n      return null;\r\n    } else {\r\n      return _parseMentionQuery(runText.substring(0, runText.length - 1), lastChar + (query || ''), position);\r\n    }\r\n  }\r\n}\r\n\r\nexport function parseMentionQuery(text, position) {\r\n  return _parseMentionQuery(text.substring(0, position), null, position);\r\n}\r\n"]}